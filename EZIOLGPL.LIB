/*
	PLC-bus driver for bl1100
*/

/*** BeginHeader */

#ifndef __EZIOLGPL_LIB
#define __EZIOLGPL_LIB

#define PIODX PIODA
#define PIOCX PIOCA
#define PIOCXShadow PIOCAShadow

#define PPLC_STBMASK 0x01
#define PPLC_STBPIN 0x00

#define PPLC_INMASK 11110000b
#define PPLC_OUTMASK 00000000b

#define PPLC_D0MASK	00000000b
#define PPLC_D1MASK	00001000b
#define PPLC_D2MASK	00000100b
#define PPLC_WRMASK	00001110b
#define PPLC_RSTMASK 00001100b
#define PPLC_A1MASK	00000010b
#define PPLC_A2MASK	00001010b
#define PPLC_A3MASK	00000110b

#define PPLC_DSHFT 4

#define PPLC_XLATE 1

#use eziopplc.lib
#use eziopbdv.lib

/*** endHeader */

/*** BeginHeader PIOCAShadow */

extern char PIOCAShadow;

/*** EndHeader */

char PIOCAShadow;

/*** beginHeader pplcDPXlateTab, pplcPDXlateTab */

extern char pplcDPXlateTab[16];
extern char pplcPDXlateTab[16];

/*** endHeader */

/*
This table is not needed, only for testing the eziopplc.lib.
*/

#asm
pplcDPXlateTab::
	;	data to port translation table
	;	D3 D2 D1 D0
	;	P5 P4 P7 P6
	db	00000000b, 01000000b, 10000000b, 11000000b, 00010000b, 01010000b, 10010000b, 11010000b
	db 00100000b, 01100000b, 10100000b, 11100000b, 00110000b, 01110000b, 10110000b, 11110000b
pplcPDXlateTab::
	;	port to data translation table
	;	P3 P2 P1 P0
	;	D1 D0 D3 D2
	db	0000b, 0100b, 1000b, 1100b, 0001b, 0101b, 1001b, 1101b
	db 0010b, 0110b, 1010b, 1110b, 0011b, 0111b, 1011b, 1111b
#endasm

/*** BeginHeader */

#endif

/*** EndHeader */